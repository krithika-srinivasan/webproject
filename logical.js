var questions = [{
    question: "Question 1: Here are some words translated from an artificial language.[1] dionot means oak tree [3] blyonot means oak leaf [3] blycrin means maple leaf Which word could mean maple syrup?",
    choices: ["blymuth","hupponot","patricrin","crinweel"],
    correctAnswer: 2
}, {
     question: "Question 2: Here are some words translated from an artificial language. [1] tamceno means sky blue [2] cenorax means blue cheese,[3] aplmitl means star bright. Which word could mean bright sky?",
    choices: ["cenotam", "mitltam", "raxmitl", "aplceno"],
    correctAnswer: 1
}, {
     question: "Question 3: Here are some words translated from an artificial language. [1]granamelke means big tree. [2]pinimelke means little tree. [3]melkehoon means tree house Which word could mean big house?",
    choices: ["granahoon", "pinishur", "pinihoon", "melkegrana"],
    correctAnswer: 0
}, {
     question: "Question 4: There are 8 houses in a line and in each house only one boy lives with the conditions as given below: [1]Jack is not the neighbour Siman. [2]Harry is just next to the left of Larry. [3]There is at least one to the left of Larry. [4]Paul lives in one of the two houses in the middle. [5]Mike lives in between Paul and Larry. If at least one lives to the right of Robert and Harry is not between Taud and Larry, then which one of the following statement is not correct ?",
    choices: ["Robert is not at the left end.", "Robert is in between Simon and Taud.", "Taud is in between Paul and Jack", "There are three persons to the right of Paul."],
    correctAnswer: 2
}, {
     question: "Question 5: Questions 5-9 are based on the following information: [1]A ,B, C, D and E are five men sitting in a line facing to south - while M, N, O, P and Q are five ladies sitting in a second line parallel to the first line and are facing to North. [2]B who is just next to the left of D, is opposite to Q. [3]C and N are diagonally opposite to each other. [4]E is opposite to O who is just next right of M. [5]P who is just to the left of Q, is opposite to D. [6]M is at one end of the line. Who is sitting third to the right of O ?",
    choices: ["Q", "N", "M", "Insufficient data"],
    correctAnswer: 1
},
{
     question: "Question 6: If B shifts to the place of E, E shifts to the place of Q, and Q shifts to the place of B, then who will be the second to the left of the person opposite to O ?",
    choices: ["Q", "P", "E", "D"],
    correctAnswer: 0
},
{
     question: "Question 7: Which of the following pair is diagonally opposite to each other?",
    choices: ["EQ", "BO", "AN", "AM"],
    correctAnswer: 3
},
{
    question:"Question 8: If O and P, A and E and B and Q interchange their positions, then who will be the second person to the right of the person who is opposite to the person second of the right of P ?",
    choices:["D", "A", "E", "O"],
    correctAnswer: 1
},
{
    question:"Question 9: In the original arrangement who is sitting just opposite to N ?",
    choices:["B", "A", "C", "D"],
    correctAnswer: 1
},
{
    question:"Question 10: Questions 10-13 are based on the following information: Six girls are sitting in a circle facing to the centre of the circle. They are P, Q, R, S, T and V. T is not between Q and S but some other one. P is next to the left of V. R is 4th to the right of P. Which of the following statement is not true ?",
    choices:["S is just next to the right to R", "T is just next to the right of V", "R is second to the left of T", "P is second to the right of R"],
    correctAnswer: 2
},
{
    question:"Question 11: If P and R interchange their positions then which of the following pair will sit together?",
    choices:["RT", "PV", "VT", "QV"],
    correctAnswer: 2
},
{
    question:"Question 12: What is the position of T?",
    choices:["Just next to the right of Q", "Second to the left of P", "Between Q and R", "To the immediate right of V"],
    correctAnswer: 3
},
{
    question:"Question 13: Which one is sitting just right to the V?",
    choices:["P", "T", "R", "S/Q"],
    correctAnswer: 1
},
{
    question:"Five of India’s leading models are posing for a photograph promoting “world peace and understanding”. But then, Rakesh Shreshtha the photographer is having a tough time getting them to stand in a straight line, because Aishwarya refuses to stand next to Sushmita because Sushmita had said something about her in a leading gossip magazine. Rachel and Anu want to stand together because they are “such good friends”. Manpreet, on the other hand cannot get along well with Rachel, because there is some talk about Rachel scheming to get a contract already awarded to Manpreet. Anu believes her friendly astrologer who has asked her to stand at the extreme right for all group photographs. Finally, Rakesh managed to pacify the girls and got a beautiful picture of five beautiful girls smiling beautifully in a beautiful straight line, promoting world peace. Question 14: If Aishwarya is standing to the extreme left, which is the girl standing in the middle?",
    choices:["Manpreet", "Sushmita", " Rachel", "Cannot say"],
    correctAnswer: 1
},
{
    question:"Question 15: If Aishwarya stands to the extreme left, which is the girl who stands second from left?",
    choices:["Cannot say", "Sushmita", "Rachel", "Manpreet"],
    correctAnswer: 3
},
{
    question:"Question 16: If Anu’s astrologer tells her to stand second from left and Aishwarya decides to stand second from right, then who is the girl standing on the extreme right?",
    choices:["Rachel", "Sushmita", "Cannot say", "Manpreet"],
    correctAnswer: 3
},
{
    question:"Directions to Solve for Q17 and 18. Each of these questions is based on the following information: [1]M % N means M is the son of N. [2]M @ N means M is the sister of N. [3]M $ N means M is the father of N. Question 17: Which of the following shows the relation that C is the granddaughter of E?",
    choices:["C % B $ F $ E", "B $ F $ E % C", "C @ B % F % E", "E % B $ F $ C"],
    correctAnswer: 2
},
{
    question:"Question 18: Which of the following shows the relation that S is the father of Q?.",
    choices:["S @ P $ Q", "Q @ P % S", "Q $ S @ P", "None of these"],
    correctAnswer: 3
},
{
    question:"Question 19: If M x N means M is the daughter of N; M + N means M is the father of N; M % N means M is the mother of N and M - N means M is the brother of N then P % Q + R - T x K indicates which relation of P to K?",
    choices:["Daughter-in-law", "Sister-in-law", "Aunt", "None of these"],
    correctAnswer: 3
},
{
    question:"Question 20: Anupam said to a lady sitting in a car, 'The only daughter of the brother of my wife is the sister-in-law of the brother of your sister.' How the husband of the lady is related to Anupam?",
    choices:["Maternal uncle", "Uncle", "Father", "Son-in-law"],
    correctAnswer: 3
}
];

var currentQuestion = 0;
var correctAnswers = 0;
var quizOver = false;

$(document).ready(function () {

    // Display the first question
    displayCurrentQuestion();
    $(this).find(".quizMessage").hide();

    // On clicking next, display the next question
    $(this).find(".nextButton").on("click", function () {
        if (!quizOver) { //If the quiz isn't over

            value = $("input[type='radio']:checked").val(); //If an answer has been checked

            if (value == undefined) {
                /*$(document).find(".quizMessage").text("Please select an answer"); //Show the alert if an answer hasn't been checked
                $(document).find(".quizMessage").show();*/
                alert("Please select an answer");
            } else { //If a value has been selected
                // TODO: Remove any message -> not sure if this is efficient to call this each time....
                $(document).find(".quizMessage").hide(); //Remove the message asking to pick an answer

                if (value == questions[currentQuestion].correctAnswer) { //Increment counter for correct answer
                    correctAnswers++;
                }

                currentQuestion++; // Since we have already displayed the first question on DOM ready
                if (currentQuestion < questions.length) {
                    displayCurrentQuestion();
                } else {
                    displayScore();
                    //                    $(document).find(".nextButton").toggle();
                    //                    $(document).find(".playAgainButton").toggle();
                    // Change the text in the next button to ask if user wants to play again
                    $(document).find(".nextButton").text("Retry?");
                    quizOver = true;
                }
            }
        } else { // quiz is over and clicked the next button (which now displays 'Play Again?'
            quizOver = false;
            $(document).find(".nextButton").text("Next Question");
            resetQuiz();
            displayCurrentQuestion();
            hideScore();
        }
    });

    //$(this).find(".nextButton").on("click", function () {   
    $(this).find(".prevButton").on("click", function(){
            if(currentQuestion > 0){
                currentQuestion--;
                displayPreviousQuestion();
            }
    });   
});

// This displays the current question AND the choices
function displayCurrentQuestion() {

    console.log("In display current Question"); //Prints message in browser console

    var question = questions[currentQuestion].question; //Holds the current question
    var questionClass = $(document).find(".quizContainer > .question"); //holds next question
    var choiceList = $(document).find(".quizContainer > .choiceList"); //holds question choices
    var numChoices = questions[currentQuestion].choices.length; //holds current question

    // Set the questionClass text to the current question
    $(questionClass).text(question);

    // Remove all current <li> elements (if any)
    $(choiceList).find("li").remove();

    var choice;
    for (i = 0; i < numChoices; i++) {
        choice = questions[currentQuestion].choices[i];
        $('<li><input type="radio" value=' + i + ' name="dynradio" />' + choice + '</li>').appendTo(choiceList); //Build new choice list
    }
}

function displayPreviousQuestion() {
    console.log("In display previous question")

    var question = questions[currentQuestion].question; //Holds the current question
    var questionClass = $(document).find(".quizContainer > .question"); //holds next question
    var choiceList = $(document).find(".quizContainer > .choiceList"); //holds question choices
    var numChoices = questions[currentQuestion].choices.length; //holds number of choice i.e. 4

    $(questionClass).text(question);

    $(choiceList).find("li").remove();

    var choice;

    for (i = 0; i < numChoices; i++) {
        choice = questions[currentQuestion].choices[i];
        $('<li><input type="radio" value=' + i + ' name="dynradio" />' + choice + '</li>').appendTo(choiceList);
    }

}

function resetQuiz() {
    currentQuestion = 0;
    correctAnswers = 0;
    hideScore();
}

function displayScore() {
    $(document).find(".quizContainer > .question").hide();
    $(document).find(".quizContainer > .choiceList").hide();
    $(document).find(".quizContainer > .result").text("You scored: " + correctAnswers + " out of: " + questions.length);
    $(document).find(".quizContainer > .result").fadein(slow);
}

function hideScore() {
    $(document).find(".result").hide();
}

